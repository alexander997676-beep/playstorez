<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FAZ STORE - Singularity</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00ff9d;       /* Cyber Green */
            --secondary: #00d2ff;     /* Holo Blue */
            --bg: #050505;            /* Void */
            --glass: rgba(20, 20, 25, 0.6);
            --glass-high: rgba(255, 255, 255, 0.1);
            --border: rgba(255, 255, 255, 0.08);
            --text: #ffffff;
            --ease: cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }

        body {
            margin: 0; padding: 0;
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            overflow: hidden; /* App style */
            height: 100vh; width: 100vw;
        }

        /* --- NEURAL BACKGROUND --- */
        canvas#neural {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;
        }

        /* --- SCROLLABLE AREA --- */
        #appContainer {
            height: 100%; overflow-y: auto; overflow-x: hidden;
            padding-bottom: 120px; position: relative; z-index: 1;
            scroll-behavior: smooth;
        }

        /* --- DYNAMIC ISLAND (Top Bar) --- */
        .top-bar {
            position: fixed; top: 10px; left: 0; width: 100%; z-index: 100;
            display: flex; justify-content: center; pointer-events: none;
        }
        
        .island {
            background: #000; border-radius: 40px; height: 40px; min-width: 120px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 5px; pointer-events: auto; transition: 0.4s var(--ease);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #222;
            overflow: hidden;
        }
        
        /* Island States */
        .island.expanded { width: 340px; height: 60px; padding: 0 15px; border-color: var(--primary); }
        .island.search-mode { width: 90%; height: 50px; border-color: var(--secondary); }

        /* Island Content */
        .island-logo { 
            display: flex; align-items: center; gap: 8px; padding-left: 10px;
            font-weight: 800; letter-spacing: -0.5px; font-size: 14px;
        }
        .island-logo span { color: var(--primary); }
        .island-search-icon {
            width: 30px; height: 30px; background: #222; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
        }

        /* Island Search Input */
        .island-inp-wrap { display: none; width: 100%; height: 100%; align-items: center; gap: 10px; }
        .island.search-mode .island-inp-wrap { display: flex; }
        .island.search-mode .island-logo, .island.search-mode .island-search-icon { display: none; }
        
        .island-input {
            flex: 1; background: transparent; border: none; color: #fff; font-size: 16px; font-family: inherit;
        }
        .island-close { font-size: 20px; cursor: pointer; color: #666; }

        /* Island Download Status */
        .island-status { display: none; align-items: center; gap: 15px; width: 100%; justify-content: space-between; }
        .island.expanded .island-status { display: flex; }
        .island.expanded .island-logo, .island.expanded .island-search-icon { display: none; }
        
        .status-icon { width: 30px; height: 30px; border-radius: 8px; background: #222; object-fit: cover; }
        .status-text { font-size: 12px; font-weight: 600; display: flex; flex-direction: column; }
        .status-bar { width: 100px; height: 4px; background: #333; border-radius: 2px; overflow: hidden; }
        .status-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.1s linear; }

        /* --- HERO SECTION --- */
        .hero {
            margin-top: 70px; padding: 0 20px; margin-bottom: 30px;
        }
        .hero-card {
            height: 220px; border-radius: 30px; position: relative; overflow: hidden;
            box-shadow: 0 20px 50px -20px rgba(0,255,157,0.2); border: 1px solid var(--border);
            cursor: pointer; transition: 0.3s;
        }
        .hero-card:active { transform: scale(0.98); }
        .hero-bg { width: 100%; height: 100%; object-fit: cover; transition: 5s; }
        .hero-card:hover .hero-bg { transform: scale(1.1); }
        
        .hero-overlay {
            position: absolute; inset: 0; background: linear-gradient(to top, #050505, transparent);
            padding: 25px; display: flex; flex-direction: column; justify-content: flex-end;
        }
        .hero-badge {
            background: rgba(255,255,255,0.1); backdrop-filter: blur(10px); color: #fff;
            padding: 5px 12px; border-radius: 20px; font-size: 10px; font-weight: 800; 
            width: fit-content; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.1);
        }
        .hero-title { font-size: 32px; font-weight: 800; line-height: 1; text-shadow: 0 5px 20px rgba(0,0,0,0.8); }

        /* --- CATEGORIES --- */
        .cats {
            display: flex; gap: 12px; padding: 0 20px 20px 20px; overflow-x: auto; scrollbar-width: none;
        }
        .cat {
            padding: 10px 20px; background: var(--glass); border-radius: 14px; border: 1px solid var(--border);
            font-size: 13px; font-weight: 600; color: #aaa; white-space: nowrap; transition: 0.3s; cursor: pointer;
        }
        .cat.active { background: #fff; color: #000; box-shadow: 0 0 20px rgba(255,255,255,0.2); border-color: #fff; }

        /* --- GRID --- */
        .section-head { padding: 0 20px; font-size: 18px; font-weight: 800; margin-bottom: 15px; color: #fff; }
        .grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px; padding: 0 20px;
        }

        .card {
            background: var(--glass); border-radius: 24px; padding: 12px; border: 1px solid var(--border);
            position: relative; transition: 0.3s cubic-bezier(0.25, 0.8, 0.25, 1); cursor: pointer;
        }
        .card:hover { transform: translateY(-5px); background: var(--glass-high); border-color: rgba(255,255,255,0.2); }
        .card:active { transform: scale(0.95); }

        .card-img {
            width: 100%; aspect-ratio: 1; border-radius: 18px; object-fit: cover; background: #111;
            margin-bottom: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .card-tag {
            position: absolute; top: 12px; right: 12px; font-size: 9px; font-weight: 800;
            padding: 4px 8px; border-radius: 6px; backdrop-filter: blur(5px);
        }
        .tag-faz { background: rgba(0, 255, 157, 0.2); color: var(--primary); border: 1px solid var(--primary); }
        .tag-play { background: rgba(0, 210, 255, 0.2); color: var(--secondary); border: 1px solid var(--secondary); }

        .card-title { font-weight: 700; font-size: 15px; margin-bottom: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-dev { font-size: 12px; color: #888; }

        /* --- PROFILE / LEVEL --- */
        .profile-bar {
            padding: 20px; margin-top: 10px; background: rgba(255,255,255,0.03); margin: 0 20px 30px 20px;
            border-radius: 20px; display: flex; align-items: center; gap: 15px; border: 1px solid var(--border);
        }
        .avatar { width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; font-weight: 800; color: #000; font-size: 20px; }
        .user-info h3 { margin: 0; font-size: 16px; }
        .user-info p { margin: 2px 0 0 0; font-size: 12px; color: #888; }
        .xp-bar { width: 100px; height: 4px; background: #333; border-radius: 2px; margin-top: 5px; }
        .xp-fill { height: 100%; background: var(--primary); width: 40%; }

        /* --- PRODUCT PAGE (Full Screen Zoom) --- */
        .prod-page {
            position: fixed; inset: 0; background: #050505; z-index: 200;
            opacity: 0; pointer-events: none; transform: scale(0.9);
            transition: 0.4s var(--ease); overflow-y: auto;
        }
        .prod-page.active { opacity: 1; pointer-events: all; transform: scale(1); }

        /* Dynamic Glow Background */
        .prod-glow {
            position: fixed; top: -20%; left: -20%; width: 140%; height: 80%;
            background: radial-gradient(circle, var(--accent-color, #444), transparent 70%);
            opacity: 0.3; pointer-events: none; z-index: -1; transition: background 0.5s;
        }

        .prod-nav { padding: 20px; position: absolute; top: 0; width: 100%; z-index: 10; }
        .back-circle {
            width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center;
            color: #fff; font-size: 20px; cursor: pointer; border: 1px solid rgba(255,255,255,0.1);
        }

        .prod-header {
            margin-top: 80px; padding: 0 25px; display: flex; flex-direction: column; align-items: center; text-align: center;
        }
        .prod-icon {
            width: 140px; height: 140px; border-radius: 35px; box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            margin-bottom: 25px; object-fit: cover;
        }
        .prod-title { font-size: 32px; font-weight: 900; line-height: 1.1; margin-bottom: 5px; }
        .prod-dev { color: #888; font-size: 15px; margin-bottom: 20px; }

        .prod-actions { width: 100%; padding: 0 25px; margin-top: 20px; }
        .dl-btn {
            width: 100%; padding: 18px; border-radius: 20px; border: none; font-size: 16px; font-weight: 800;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: 0.2s;
        }
        .dl-faz { background: #fff; color: #000; box-shadow: 0 0 30px rgba(255,255,255,0.2); }
        .dl-play { background: #1a1a1a; color: var(--secondary); border: 1px solid #333; }

        .prod-info { padding: 30px 25px; }
        .desc { font-size: 15px; line-height: 1.6; color: #ccc; }

        /* --- DOCK --- */
        .dock-wrap { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: center; z-index: 90; }
        .dock {
            background: rgba(20, 20, 25, 0.8); backdrop-filter: blur(20px);
            padding: 12px 25px; border-radius: 30px; border: 1px solid var(--border);
            display: flex; gap: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        .dock-item { font-size: 24px; opacity: 0.5; transition: 0.2s; cursor: pointer; }
        .dock-item.active { opacity: 1; transform: translateY(-5px); text-shadow: 0 0 15px #fff; }

        /* --- SEARCH RESULTS --- */
        .search-results {
            position: fixed; top: 70px; left: 0; width: 100%; height: calc(100% - 70px);
            background: rgba(5,5,5,0.95); backdrop-filter: blur(10px); z-index: 90;
            padding: 20px; display: none; overflow-y: auto;
        }
        .search-results.active { display: block; animation: fadeIn 0.3s; }

        /* Browser */
        #browser { position: fixed; inset: 0; background: #000; z-index: 500; display: none; flex-direction: column; }
        iframe { flex: 1; border: none; background: #fff; }

        /* Skeleton */
        .skel { background: rgba(255,255,255,0.05); border-radius: 24px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    </style>
</head>
<body>

    <!-- NEURAL BACKGROUND -->
    <canvas id="neural"></canvas>

    <!-- TOP BAR / DYNAMIC ISLAND -->
    <div class="top-bar">
        <div class="island" id="island">
            <!-- Idle State -->
            <div class="island-logo">FAZ<span>STORE</span> <img src="https://i.supaimg.com/ed405240-9db3-4d6e-8cc1-1f070d18f5d9.png" style="width:18px;"></div>
            <div class="island-search-icon" onclick="activateSearch()">üîç</div>

            <!-- Search Mode -->
            <div class="island-inp-wrap">
                <span style="font-size:14px; color:#666;">üîç</span>
                <input type="text" class="island-input" id="searchInp" placeholder="Search apps...">
                <div class="island-close" onclick="deactivateSearch()">‚úï</div>
            </div>

            <!-- Status Mode -->
            <div class="island-status">
                <img id="islIcon" class="status-icon" src="">
                <div class="status-text">
                    <span id="islStatus">Downloading...</span>
                    <div class="status-bar"><div class="status-fill" id="islFill"></div></div>
                </div>
                <div style="font-size:14px;">‚¨á</div>
            </div>
        </div>
    </div>

    <!-- MAIN SCROLL -->
    <div id="appContainer">
        
        <!-- Hero -->
        <div class="hero">
            <div class="hero-card" onclick="loadData('Popular')">
                <img src="https://image.winudf.com/v2/image1/Y29tLm1vamFuZy5taW5lY3JhZnRwZV9zY3JlZW5fMF8xNjcxOTc2NjAzXzA2NA/screen-0.jpg?fakeurl=1&type=.jpg" class="hero-bg">
                <div class="hero-overlay">
                    <div class="hero-badge">FEATURED</div>
                    <div class="hero-title">Minecraft: PE</div>
                </div>
            </div>
        </div>

        <!-- Profile Bar -->
        <div class="profile-bar">
            <div class="avatar">U</div>
            <div class="user-info">
                <h3>User Level 1</h3>
                <div class="xp-bar"><div class="xp-fill"></div></div>
                <p>0/100 XP to Level 2</p>
            </div>
        </div>

        <!-- Categories -->
        <div class="cats">
            <div class="cat active" onclick="loadTab('Popular', this)">All</div>
            <div class="cat" onclick="loadTab('Action', this)">Games</div>
            <div class="cat" onclick="loadTab('Tools', this)">Apps</div>
            <div class="cat" onclick="loadTab('Social', this)">Social</div>
            <div class="cat" onclick="loadTab('Racing', this)">Racing</div>
        </div>

        <!-- Main Grid -->
        <div class="section-head">Discover</div>
        <div class="grid" id="mainGrid"></div>
        
        <!-- Search Results View -->
        <div class="search-results" id="searchRes">
            <div class="grid" id="searchGrid"></div>
        </div>

    </div>

    <!-- DOCK -->
    <div class="dock-wrap">
        <div class="dock">
            <div class="dock-item active" onclick="resetApp()">üè†</div>
            <div class="dock-item" onclick="activateSearch()">üîç</div>
            <div class="dock-item" onclick="alert('Profile Locked')">üë§</div>
        </div>
    </div>

    <!-- PRODUCT PAGE -->
    <div class="prod-page" id="prodView">
        <div class="prod-glow" id="prodGlow"></div>
        <div class="prod-nav">
            <div class="back-circle" onclick="closeProd()">‚úï</div>
        </div>
        <div class="prod-header">
            <img id="pIcon" class="prod-icon" src="">
            <div class="prod-title" id="pTitle">App Name</div>
            <div class="prod-dev" id="pDev">Developer</div>
            <div style="display:flex; gap:10px;">
                <div class="hero-badge" id="pSrcTag" style="margin:0;">FAZ STORE</div>
                <div class="hero-badge" style="background:rgba(255,255,255,0.1); margin:0;">4.9 ‚òÖ</div>
            </div>
        </div>

        <div class="prod-actions">
            <button id="pBtn" class="dl-btn dl-faz" onclick="startDownload()">Download</button>
        </div>

        <div class="prod-info">
            <h3 style="margin-bottom:10px;">Description</h3>
            <p class="desc">
                Verified application package. 
                Optimized for your device architecture. 
                Experience premium features unlocked.
                <br><br>
                Security Scan: Passed ‚úì
            </p>
        </div>
        <div style="height:100px;"></div>
    </div>

    <!-- BROWSER -->
    <div id="browser">
        <div style="padding:15px; background:#000; display:flex; justify-content:space-between; border-bottom:1px solid #222;">
            <span style="color:var(--primary)">üîí Secure Connection</span>
            <button onclick="closeBrowser()" style="color:#fff; background:none; border:none;">Done</button>
        </div>
        <iframe id="webFrame" src=""></iframe>
    </div>

    <script>
        // --- CANVAS ---
        const canvas = document.getElementById('neural');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        let particles = [];
        const mouse = { x: null, y: null };

        window.addEventListener('mousemove', (e) => { mouse.x = e.x; mouse.y = e.y; });
        
        class Particle {
            constructor(){
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
            }
            update(){
                this.x += this.speedX;
                this.y += this.speedY;
                if(this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                if(this.y < 0 || this.y > canvas.height) this.speedY *= -1;
            }
            draw(){
                ctx.fillStyle = 'rgba(0, 255, 157, 0.5)';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles(){ particles = []; for(let i=0; i<40; i++){ particles.push(new Particle()); } }
        initParticles();

        function animate(){
            ctx.clearRect(0,0,canvas.width, canvas.height);
            for(let i=0; i<particles.length; i++){
                particles[i].update();
                particles[i].draw();
                // Connect
                for(let j=i; j<particles.length; j++){
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    if(dist < 100){
                        ctx.beginPath();
                        ctx.strokeStyle = `rgba(0, 255, 157, ${1 - dist/100})`;
                        ctx.lineWidth = 0.5;
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }
        animate();

        // --- APP LOGIC ---
        const API_AN1 = "https://api.xyro.site/apk/an1-search?search=";
        const API_PLAY = "https://api.xyro.site/apk/playstore-search?query=";
        
        let currentApp = null;
        let xp = 0;

        window.onload = () => loadData("Popular");

        function resetApp() {
            deactivateSearch(); closeProd(); loadData("Popular");
        }

        async function loadData(query, tabEl = null) {
            if(tabEl) {
                document.querySelectorAll('.cat').forEach(c => c.classList.remove('active'));
                tabEl.classList.add('active');
            }
            
            const target = document.getElementById('mainGrid');
            target.innerHTML = Array(6).fill('<div class="card skel" style="height:200px"></div>').join('');

            try {
                const [an1, play] = await Promise.allSettled([
                    fetch(API_AN1 + encodeURIComponent(query)).then(r => r.json()),
                    fetch(API_PLAY + encodeURIComponent(query)).then(r => r.json())
                ]);

                let apps = [];
                if(play.status === "fulfilled") {
                    let d = play.value;
                    let list = (d.result && Array.isArray(d.result)) ? d.result : (Array.isArray(d) ? d : []);
                    list.forEach(i => apps.push({ src: 'PLAY', title: i.name||"App", img: i.img||"", dev: i.developer||"Google Play", link: i.link }));
                }
                if(an1.status === "fulfilled" && an1.value.status) {
                    (an1.value.result || []).forEach(i => apps.push({ src: 'FAZ', title: i.title||i.name||"MOD", img: i.image||i.icon||"", dev: i.developer||"Faz Store", link: i.link }));
                }

                apps.sort(() => Math.random() - 0.5);
                renderGrid(apps, target);
            } catch(e) { target.innerHTML = ""; }
        }

        function renderGrid(apps, container) {
            container.innerHTML = "";
            apps.forEach(app => {
                const isPlay = app.src === 'PLAY';
                const div = document.createElement("div");
                div.className = "card";
                div.innerHTML = `
                    <div class="card-tag ${isPlay?'tag-play':'tag-faz'}">${isPlay?'OFFICIAL':'FAZ MOD'}</div>
                    <img src="${app.img}" class="card-img" onerror="this.src='https://via.placeholder.com/150'">
                    <div class="card-title">${app.title}</div>
                    <div class="card-dev">${app.dev}</div>
                `;
                div.onclick = () => openProd(app);
                container.appendChild(div);
            });
        }

        // --- DYNAMIC ISLAND LOGIC ---
        function activateSearch() {
            document.getElementById('island').classList.add('search-mode');
            document.getElementById('searchRes').classList.add('active');
            document.getElementById('searchInp').focus();
        }
        function deactivateSearch() {
            document.getElementById('island').classList.remove('search-mode');
            document.getElementById('searchRes').classList.remove('active');
            document.getElementById('searchInp').value = "";
            document.getElementById('searchGrid').innerHTML = "";
        }

        let debounce;
        document.getElementById("searchInp").addEventListener("input", (e) => {
            clearTimeout(debounce);
            debounce = setTimeout(() => {
                if(e.target.value.length > 1) searchData(e.target.value);
            }, 600);
        });

        async function searchData(q) {
            const grid = document.getElementById('searchGrid');
            grid.innerHTML = '<div class="card skel" style="grid-column:1/-1; height:100px;"></div>';
            
            // Re-using fetch logic
            try {
                const [an1, play] = await Promise.allSettled([
                    fetch(API_AN1 + encodeURIComponent(q)).then(r => r.json()),
                    fetch(API_PLAY + encodeURIComponent(q)).then(r => r.json())
                ]);
                let apps = [];
                if(play.status === "fulfilled") {
                    let d = play.value;
                    let list = (d.result && Array.isArray(d.result)) ? d.result : (Array.isArray(d) ? d : []);
                    list.forEach(i => apps.push({ src: 'PLAY', title: i.name||"App", img: i.img||"", dev: i.developer||"Google Play", link: i.link }));
                }
                if(an1.status === "fulfilled" && an1.value.status) {
                    (an1.value.result || []).forEach(i => apps.push({ src: 'FAZ', title: i.title||i.name||"MOD", img: i.image||i.icon||"", dev: i.developer||"Faz Store", link: i.link }));
                }
                
                // Exact Match Sort
                const lower = q.toLowerCase();
                apps.sort((a,b) => {
                    if(a.title.toLowerCase() === lower) return -1;
                    if(b.title.toLowerCase() === lower) return 1;
                    return 0;
                });

                renderGrid(apps, grid);
            } catch(e) { grid.innerHTML = ""; }
        }

        // --- PRODUCT PAGE ---
        function openProd(app) {
            currentApp = app;
            document.getElementById("pIcon").src = app.img;
            document.getElementById("pTitle").innerText = app.title;
            document.getElementById("pDev").innerText = app.dev;
            
            // Random color generator for glow
            const hue = Math.floor(Math.random() * 360);
            document.getElementById("prodGlow").style.setProperty('--accent-color', `hsl(${hue}, 80%, 50%)`);

            const btn = document.getElementById("pBtn");
            const tag = document.getElementById("pSrcTag");

            if(app.src === 'PLAY') {
                btn.className = "dl-btn dl-play"; btn.innerText = "Get from Play Store";
                tag.innerText = "OFFICIAL"; tag.style.background = "rgba(255,255,255,0.1)"; tag.style.color = "#fff";
            } else {
                btn.className = "dl-btn dl-faz"; btn.innerText = "Download Mod";
                tag.innerText = "FAZ STORE"; tag.style.background = "var(--primary)"; tag.style.color = "#000";
            }

            document.getElementById("prodView").classList.add("active");
        }
        function closeProd() { document.getElementById("prodView").classList.remove("active"); }

        // --- DOWNLOAD ---
        function startDownload() {
            if(currentApp.src === 'PLAY') {
                window.open(currentApp.link, '_blank');
            } else {
                closeProd();
                deactivateSearch();
                
                // Dynamic Island Animation
                const isl = document.getElementById("island");
                const icon = document.getElementById("islIcon");
                const fill = document.getElementById("islFill");
                const status = document.getElementById("islStatus");

                isl.classList.add("expanded");
                icon.src = currentApp.img;
                fill.style.width = "0%";
                status.innerText = "Connecting...";

                let w = 0;
                const int = setInterval(() => {
                    w += 2;
                    fill.style.width = w + "%";
                    if(w > 30) status.innerText = "Downloading...";
                    if(w >= 100) {
                        clearInterval(int);
                        status.innerText = "Complete";
                        setTimeout(() => {
                            isl.classList.remove("expanded");
                            openBrowser(currentApp.link);
                            xp += 10; // Level Up Logic
                            document.querySelector(".user-info p").innerText = `${xp}/100 XP to Level 2`;
                            document.querySelector(".xp-fill").style.width = `${xp}%`;
                        }, 1000);
                    }
                }, 50);
            }
        }

        function openBrowser(url) {
            document.getElementById("webFrame").src = url;
            document.getElementById("browser").style.display = "flex";
        }
        function closeBrowser() {
            document.getElementById("browser").style.display = "none";
            document.getElementById("webFrame").src = "";
        }

    </script>
</body>
</html>
